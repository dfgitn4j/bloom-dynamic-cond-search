{"categories":[{"id":4,"name":"Rich","color":"#569480","size":1,"icon":"82B6EE21-F5DB-437F-BBD6-039587828D0F","labels":["Rich"],"properties":[{"name":"born","exclude":false,"isCaption":true,"dataType":"bigint"},{"name":"name","exclude":false,"isCaption":true,"dataType":"string"}],"caption":[""],"createdAt":1622738385063,"lastEditedAt":1623602678616,"styleRules":[{"type":"single","size":1,"minSize":1,"maxSize":2,"minColor":"#D5EEE2","midColor":"#81CCA8","maxColor":"#428C6A","minPoint":"unprocessed","maxPoint":"unprocessed","color":"#F79767","basedOn":"_other","valuesMapper":[],"existingValues":[],"applyColor":true,"applySize":false,"condition":"has-label","conditionValue":"Famous"}]},{"id":3,"name":"Famous","color":"#4C8EDA","size":1,"icon":"35BF512E-4C38-4B28-9CF4-6011384A4AE2","labels":["Famous"],"properties":[{"name":"born","exclude":false,"isCaption":true,"dataType":"bigint"},{"name":"name","exclude":false,"isCaption":true,"dataType":"string"},{"name":"tagline","exclude":false,"isCaption":false,"dataType":"string"},{"name":"title","exclude":false,"isCaption":false,"dataType":"string"},{"name":"released","exclude":false,"isCaption":false,"dataType":"bigint"}],"caption":[""],"createdAt":1622738379235,"lastEditedAt":1623075766358},{"id":1,"name":"Movie","color":"#FFE081","size":1,"icon":"5F16F8FC-DDB5-4693-8AAE-57902B6D3828","labels":["Movie"],"properties":[{"name":"tagline","exclude":false,"isCaption":false,"dataType":"string"},{"name":"title","exclude":false,"isCaption":true,"dataType":"string"},{"name":"released","exclude":false,"isCaption":true,"dataType":"bigint"}],"caption":[""],"createdAt":1617391088406,"lastEditedAt":1623602841049,"styleRules":[{"type":"single","size":1,"minSize":1,"maxSize":2,"minColor":"#D5EEE2","midColor":"#81CCA8","maxColor":"#428C6A","minPoint":"unprocessed","maxPoint":"unprocessed","color":"#FFC454","basedOn":"_other","valuesMapper":[],"existingValues":[],"applyColor":true,"applySize":false,"condition":"has-label","conditionValue":"Famous"}]},{"id":2,"name":"Person","color":"#C990C0","size":1,"icon":"DB188874-D25F-4B34-A296-E5E950072319","labels":["Person"],"properties":[{"name":"born","exclude":false,"isCaption":true,"dataType":"bigint"},{"name":"name","exclude":false,"isCaption":true,"dataType":"string"}],"caption":[""],"createdAt":1617391088406,"lastEditedAt":1623092439373,"styleRules":[{"type":"single","size":1,"minSize":1,"maxSize":2,"minColor":"#D5EEE2","midColor":"#81CCA8","maxColor":"#428C6A","minPoint":"unprocessed","maxPoint":"unprocessed","color":"#F79767","basedOn":"_other","valuesMapper":[],"existingValues":[],"applyColor":true,"applySize":false,"condition":"has-label","conditionValue":"Rich"}]}],"name":"Bloom conditional and dynamicÂ queries","id":"9c9152e0-caf5-11eb-b16e-85ba320527c3","labels":{"Person":[{"propertyKey":"born","type":"Person","dataType":"bigint"},{"propertyKey":"name","type":"Person","dataType":"string"}],"Famous":[{"propertyKey":"born","type":"Famous","dataType":"bigint"},{"propertyKey":"name","type":"Famous","dataType":"string"},{"propertyKey":"tagline","type":"Famous","dataType":"string"},{"propertyKey":"title","type":"Famous","dataType":"string"},{"propertyKey":"released","type":"Famous","dataType":"bigint"}],"Rich":[{"propertyKey":"born","type":"Rich","dataType":"bigint"},{"propertyKey":"name","type":"Rich","dataType":"string"}],"Movie":[{"propertyKey":"tagline","type":"Movie","dataType":"string"},{"propertyKey":"title","type":"Movie","dataType":"string"},{"propertyKey":"released","type":"Movie","dataType":"bigint"}]},"relationshipTypes":[{"properties":[{"propertyKey":"roles","type":"ACTED_IN","dataType":"array"}],"name":"ACTED_IN","id":"ACTED_IN"},{"properties":[],"name":"DIRECTED","id":"DIRECTED"},{"properties":[],"name":"PRODUCED","id":"PRODUCED"},{"properties":[],"name":"WROTE","id":"WROTE"},{"properties":[],"name":"FOLLOWS","id":"FOLLOWS"},{"properties":[{"propertyKey":"summary","type":"REVIEWED","dataType":"string"},{"propertyKey":"rating","type":"REVIEWED","dataType":"bigint"}],"name":"REVIEWED","id":"REVIEWED"}],"palette":{"colors":["#FFE081","#C990C0","#F79767","#57C7E3","#F16667","#D9C8AE","#8DCC93","#ECB5C9","#4C8EDA","#FFC454","#DA7194","#569480","#848484","#D9D9D9"],"currentIndex":10},"createdAt":1623444180750,"lastEditedAt":1623444180750,"templates":[{"name":"Graph schema","id":"tmpl:1623092661981","createdAt":1623092661981,"text":":Schema","cypher":"CALL db.schema.visualization() YIELD nodes, relationships\nUNWIND nodes as node\nwith node, relationships\nWHERE apoc.node.labels(node) <> [\"_Bloom_Perspective_\"]\nRETURN collect(node) AS nodes, relationships","params":[],"hasCypherErrors":false},{"name":" Find nodes by label with a numeric property conditional clause","id":"tmpl:1622760313865","createdAt":1622760313865,"text":"Q2 - Find $label nodes with numeric property $property $condition $value","cypher":"WITH \"MATCH (n:\" + $label + \") \" +\n  \"WHERE n.\" + $property + \n  \" \" + $condition +\n  \" \" + $value +\n  \" RETURN n\" AS qryStr\nCALL apoc.cypher.run(qryStr, {}) YIELD value AS nodes\nRETURN nodes","params":[{"name":"$label","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"CALL db.labels() YIELD label\nWHERE label <> '_Bloom_Perspective_'\nRETURN label\n"},{"name":"$property","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"CALL db.schema.nodeTypeProperties() YIELD nodeType, propertyName, propertyTypes\nWHERE nodeType = \":`\" + $label + \"`\"\n  AND propertyTypes IN [['Long'], ['Double']]\nRETURN DISTINCT propertyName"},{"name":"$condition","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"UNWIND [\"=\", \"<>\", \"<\", \">\", \"<=\", \">=\", \"IS NULL\", \"IS NOT NULL\"] AS opX\nRETURN opX"},{"name":"$value","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":null}],"hasCypherErrors":false},{"name":"Find nodes with multiple label combinations","id":"tmpl:1622737947490","createdAt":1622737947490,"text":"Q4 - Nodes with label combinations $labelCombos","cypher":"WITH \"MATCH (is) WHERE \" + replace($labelCombos, ':', 'is:') + \" RETURN is\" AS qryStr\nCALL apoc.cypher.run(qryStr, {}) YIELD value AS nodes\nRETURN nodes\n","params":[{"name":"$labelCombos","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"CALL db.labels() YIELD label as label\nWHERE label <> '_Bloom_Perspective_'\nWITH  collect(label) as labels\nWITH labels, size(labels) as nbrLabels\nUNWIND apoc.coll.combinations(labels, 2, nbrLabels) AS labelCombos\nWITH labelCombos  // exclude invalid label combinations\nWHERE NOT ('Movie' IN labelCombos AND 'Person' IN labelCombos)\n  AND NOT ('Movie' IN labelCombos AND 'Rich' IN labelCombos)\nWITH labelCombos\nWITH reduce(x = '', lab in labelCombos | x + ':' + lab + ' AND ' ) AS whereClause\nRETURN left(whereClause, size(whereClause) - 4) as whereClause"}],"hasCypherErrors":false},{"name":"Nodes labeled [label] where [property] [condition] [value] [and / or] [property] [condition] [value]","id":"tmpl:1622645045758","createdAt":1622645045758,"text":"Q3 - Nodes labeled $label where $property1 $operator1 $val1 $andOr $property2 $operator2 $val2","cypher":"WITH CASE WHEN $operator1 IN ['IS_NULL', 'IS_ NOT_NULL'] THEN $operator1 ELSE $operator1 + ' ' + $val1 END AS cond1,\n     CASE WHEN $operator2 IN ['IS_NULL', 'IS_NOT_NULL'] THEN $operator2 ELSE $operator2 + ' ' + $val2 END AS cond2\nWITH \"MATCH (n:\" + $label + \")\" +\n  \" \" + \"WHERE n.\" + $property1 + \n  \" \" + replace(cond1, '_', ' ') + \n  \" \" + $andOr +\n  \" \" + \" n.\" + $property2 +\n  \" \" + replace(cond2, '_', ' ') + \n  \" RETURN n\" AS qryStr\nCALL apoc.cypher.run(qryStr, {}) YIELD value AS nodes\nRETURN nodes\n","params":[{"name":"$label","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"CALL db.labels() YIELD label\nWHERE label <> '_Bloom_Perspective_'\nRETURN label"},{"name":"$property1","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"CALL apoc.meta.nodeTypeProperties({labels : [$label], sample : 2000}) YIELD propertyName\nRETURN DISTINCT propertyName "},{"name":"$operator1","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"// Parameter: $operator1 data type: String; values: Cypher Query\nWITH 'MATCH (n:' + $label + ') WITH apoc.meta.cypher.type(n.' +\n   $property1 + ') AS propType LIMIT 1 RETURN propType' AS qryStrProp\n   CALL apoc.cypher.run(qryStrProp, {}) YIELD value AS retMap\n   WITH \n   CASE retMap.propType\n     WHEN \"STRING\" THEN [\"STARTS_WITH\", \"CONTAINS\", \"ENDS_WITH\"]\n     ELSE []\n   END AS strOpts\n   UNWIND strOpts + [\"=\", \"<>\", \"<\", \">\", \"<=\", \">=\", \"IS_\"] AS operator\nRETURN operator AS operator1"},{"name":"$val1","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"WITH CASE WHEN $operator1 = 'IS_'  THEN ['NULL', 'NOT_NULL'] ELSE [''] END as v\nUNWIND v AS val1\nRETURN val1\n\n"},{"name":"$andOr","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"UNWIND [\"AND\", \"OR\"] as andOr\nRETURN andOr"},{"name":"$property2","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"CALL apoc.meta.nodeTypeProperties({labels : [$label], sample : 2000}) YIELD propertyName\nRETURN DISTINCT propertyName "},{"name":"$operator2","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"WITH 'MATCH (n:' + $label + ') WITH apoc.meta.cypher.type(n.' +\n   $property2 + ') AS propType LIMIT 1 RETURN propType' AS qryStrProp\n   CALL apoc.cypher.run(qryStrProp, {}) YIELD value AS retMap\n   WITH \n   CASE retMap.propType\n     WHEN \"STRING\" THEN [\"STARTS_WITH\", \"CONTAINS\", \"ENDS_WITH\"]\n     ELSE []\n   END AS strOpts\n   UNWIND strOpts + [\"=\", \"<>\", \"<\", \">\", \"<=\", \">=\", \"IS_\"] AS operator\nRETURN operator AS operator2"},{"name":"$val2","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":"WITH CASE WHEN $operator2 = 'IS_'  THEN ['NULL', 'NOT_NULL'] ELSE [''] END as v\nUNWIND v AS val2\nRETURN val2"}],"hasCypherErrors":false},{"name":"Input Cypher (Return a path / no syntax checking)","id":"tmpl:1622555177015","createdAt":1622555177015,"text":"Q1 - Cypher Input: $cypherText","cypher":"CALL apoc.cypher.run($cypherText + ' LIMIT 2000', {}) YIELD value as results\nRETURN results\n","params":[{"name":"$cypherText","dataType":"String","suggestionLabel":null,"suggestionProp":null,"cypher":null}],"hasCypherErrors":false}],"hiddenRelationshipTypes":[],"hiddenCategories":[],"hideUncategorisedData":false,"parentPerspectiveId":"285d7000-93e8-11eb-94e4-579e8835a484","metadata":{"pathSegments":[{"source":"Person","relationshipType":"ACTED_IN","target":"Movie"},{"source":"Rich","relationshipType":"ACTED_IN","target":"Famous"},{"source":"Famous","relationshipType":"ACTED_IN","target":"Famous"},{"source":"Famous","relationshipType":"ACTED_IN","target":"Movie"},{"source":"Rich","relationshipType":"ACTED_IN","target":"Movie"},{"source":"Person","relationshipType":"ACTED_IN","target":"Famous"},{"source":"Person","relationshipType":"REVIEWED","target":"Famous"},{"source":"Rich","relationshipType":"REVIEWED","target":"Movie"},{"source":"Rich","relationshipType":"REVIEWED","target":"Famous"},{"source":"Person","relationshipType":"REVIEWED","target":"Movie"},{"source":"Famous","relationshipType":"REVIEWED","target":"Famous"},{"source":"Famous","relationshipType":"REVIEWED","target":"Movie"},{"source":"Rich","relationshipType":"PRODUCED","target":"Famous"},{"source":"Person","relationshipType":"PRODUCED","target":"Movie"},{"source":"Famous","relationshipType":"PRODUCED","target":"Famous"},{"source":"Famous","relationshipType":"PRODUCED","target":"Movie"},{"source":"Person","relationshipType":"PRODUCED","target":"Famous"},{"source":"Rich","relationshipType":"PRODUCED","target":"Movie"},{"source":"Rich","relationshipType":"WROTE","target":"Movie"},{"source":"Famous","relationshipType":"WROTE","target":"Movie"},{"source":"Person","relationshipType":"WROTE","target":"Movie"},{"source":"Rich","relationshipType":"WROTE","target":"Famous"},{"source":"Person","relationshipType":"WROTE","target":"Famous"},{"source":"Famous","relationshipType":"WROTE","target":"Famous"},{"source":"Famous","relationshipType":"FOLLOWS","target":"Person"},{"source":"Person","relationshipType":"FOLLOWS","target":"Person"},{"source":"Famous","relationshipType":"FOLLOWS","target":"Rich"},{"source":"Rich","relationshipType":"FOLLOWS","target":"Person"},{"source":"Rich","relationshipType":"FOLLOWS","target":"Famous"},{"source":"Person","relationshipType":"FOLLOWS","target":"Rich"},{"source":"Famous","relationshipType":"FOLLOWS","target":"Famous"},{"source":"Rich","relationshipType":"FOLLOWS","target":"Rich"},{"source":"Person","relationshipType":"FOLLOWS","target":"Famous"},{"source":"Person","relationshipType":"DIRECTED","target":"Famous"},{"source":"Rich","relationshipType":"DIRECTED","target":"Famous"},{"source":"Rich","relationshipType":"DIRECTED","target":"Movie"},{"source":"Famous","relationshipType":"DIRECTED","target":"Famous"},{"source":"Person","relationshipType":"DIRECTED","target":"Movie"},{"source":"Famous","relationshipType":"DIRECTED","target":"Movie"}],"indexes":[{"label":"Person","type":"native","isMetadataPropIndex":true,"propertyKeys":["born","name"]},{"label":"Famous","type":"native","isMetadataPropIndex":true,"propertyKeys":["born","name","tagline","title","released"]},{"label":"Rich","type":"native","isMetadataPropIndex":true,"propertyKeys":["born","name"]},{"label":"Movie","type":"native","isMetadataPropIndex":true,"propertyKeys":["tagline","title","released"]}],"stats":{"labels":{},"relationshipTypes":{"ACTED_IN":172,"DIRECTED":44,"FOLLOWS":3,"PRODUCED":15,"REVIEWED":9,"WROTE":10}}},"version":"1.6.2"}